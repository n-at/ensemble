{% extends "includes/layout.twig" %}

{% block title %}
    User project access - ensemble
{% endblock %}

{% block content %}

    <h1>Project access</h1>
    <h2>{{user_control.Login}}</h2>

    {% if projects %}
        <form method="post" action="/users/projects/{{user_control.Id}}" enctype="application/x-www-form-urlencoded" class="mt-3">
            {% for projectInfo in projects %}
                <div class="form-check">
                    <input type="checkbox"
                           class="form-check-input"
                           name="projects[]"
                           id="project-{{projectInfo.Project.Id}}"
                           value="{{projectInfo.Project.Id}}"
                           {% if projectInfo.Access %}checked{% endif %}
                    >
                    <label for="project-{{projectInfo.Project.Id}}" class="form-check-label">
                        {{projectInfo.Project.Name}}
                    </label>
                </div>
            {% endfor %}
            <div class="mb-3 mt-3">
                <button type="submit" class="btn btn-primary">
                    Save access
                </button>
            </div>
        </form>
    {% else %}
        {% include "includes/empty_state.twig" with icon="bi bi-file-earmark" text="No projects found" %}
    {% endif %}

{% endblock %}
